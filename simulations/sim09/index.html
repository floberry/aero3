<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë¬¼ë¦¬í•™2 ë¬¸ì œ ì‹œë®¬ë ˆì´í„°</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Malgun Gothic', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .container {
            max-width: 500px;
            width: 100%;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            padding: 30px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .header h1 {
            color: #667eea;
            font-size: 28px;
        }
        
        .problem-section {
            margin: 25px 0;
        }
        
        .problem-type {
            background: #f0f0f0;
            padding: 10px 15px;
            border-radius: 10px;
            font-weight: bold;
            color: #555;
            margin-bottom: 15px;
            display: inline-block;
        }
        
        .problem-text {
            font-size: 18px;
            line-height: 1.8;
            margin-bottom: 20px;
            color: #333;
        }
        
        .diagram {
            background: #f8f9fa;
            border: 2px solid #667eea;
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
            text-align: center;
        }
        
        .input-section {
            margin: 25px 0;
        }
        
        .input-group {
            margin: 15px 0;
        }
        
        .input-group label {
            display: block;
            font-weight: bold;
            margin-bottom: 8px;
            color: #555;
        }
        
        .input-group input {
            width: 100%;
            padding: 12px;
            font-size: 16px;
            border: 2px solid #ddd;
            border-radius: 10px;
            transition: border-color 0.3s;
        }
        
        .input-group input:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .button-group {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        
        button {
            flex: 1;
            padding: 15px;
            font-size: 16px;
            font-weight: bold;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .check-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .check-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        
        .new-btn {
            background: #28a745;
            color: white;
        }
        
        .new-btn:hover {
            background: #218838;
            transform: translateY(-2px);
        }
        
        .feedback {
            margin-top: 20px;
            padding: 15px;
            border-radius: 10px;
            font-weight: bold;
            text-align: center;
            display: none;
        }
        
        .feedback.correct {
            background: #d4edda;
            color: #155724;
            border: 2px solid #28a745;
        }
        
        .feedback.incorrect {
            background: #f8d7da;
            color: #721c24;
            border: 2px solid #dc3545;
        }
        
        .feedback-details {
            margin-top: 10px;
            font-size: 14px;
            font-weight: normal;
            line-height: 1.6;
        }

        canvas {
            max-width: 100%;
            height: auto;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>âš›ï¸ ë¬¼ë¦¬í•™2 ì‹œë®¬ë ˆì´í„°</h1>
        </div>
        
        <div class="problem-section">
            <div class="problem-type" id="problemType"></div>
            <div class="problem-text" id="problemText"></div>
            <div class="diagram">
                <canvas id="diagram" width="400" height="300"></canvas>
            </div>
        </div>
        
        <div class="input-section" id="inputSection"></div>
        
        <div class="button-group">
            <button class="check-btn" onclick="checkAnswer()">ì •ë‹µ í™•ì¸</button>
            <button class="new-btn" onclick="newProblem()">ìƒˆ ë¬¸ì œ</button>
        </div>
        
        <div class="feedback" id="feedback"></div>
    </div>

    <script>
        let currentProblem = null;

        const problemTypes = [
            {
                type: 'ë“±ì†ì›ìš´ë™ - ë³€ìœ„ì™€ ì´ë™ê±°ë¦¬',
                generator: () => {
                    const choices = [
                        {r: 4, angle: 90, displacement: 5.66, distance: 6.28},
                        {r: 6, angle: 90, displacement: 8.49, distance: 9.42},
                        {r: 8, angle: 180, displacement: 16, distance: 25.13},
                        {r: 10, angle: 180, displacement: 20, distance: 31.42}
                    ];
                    const choice = choices[Math.floor(Math.random() * choices.length)];
                    
                    return {
                        text: `ë°˜ì§€ë¦„ ${choice.r}mì¸ ì›ê¶¤ë„ë¥¼ ë”°ë¼ ë¬¼ì²´ê°€ ë“±ì†ì›ìš´ë™ì„ í•˜ê³  ìˆìŠµë‹ˆë‹¤. ë¬¼ì²´ê°€ ${choice.angle}Â° íšŒì „í–ˆì„ ë•Œ, ë³€ìœ„ì˜ í¬ê¸°ë¥¼ êµ¬í•˜ì‹œì˜¤. (ì›ì£¼ìœ¨ Ï€ = 3.14)`,
                        inputs: [
                            { label: 'ë³€ìœ„ì˜ í¬ê¸° (m)', answer: choice.displacement, unit: 'm' }
                        ],
                        diagram: (ctx) => {
                            ctx.clearRect(0, 0, 400, 300);
                            ctx.strokeStyle = '#667eea';
                            ctx.lineWidth = 3;
                            ctx.beginPath();
                            ctx.arc(200, 150, 80, 0, 2 * Math.PI);
                            ctx.stroke();
                            
                            // ì‹œì‘ì 
                            ctx.fillStyle = '#28a745';
                            ctx.beginPath();
                            ctx.arc(280, 150, 8, 0, 2 * Math.PI);
                            ctx.fill();
                            ctx.fillStyle = '#28a745';
                            ctx.font = 'bold 14px Arial';
                            ctx.fillText('A', 290, 150);
                            
                            // ëì 
                            const endX = 200 + 80 * Math.cos((270 - choice.angle) * Math.PI / 180);
                            const endY = 150 + 80 * Math.sin((270 - choice.angle) * Math.PI / 180);
                            ctx.fillStyle = '#e74c3c';
                            ctx.beginPath();
                            ctx.arc(endX, endY, 8, 0, 2 * Math.PI);
                            ctx.fill();
                            ctx.fillStyle = '#e74c3c';
                            ctx.fillText('B', endX + 10, endY);
                            
                            // ë³€ìœ„ ë²¡í„°
                            ctx.strokeStyle = '#ff6b6b';
                            ctx.lineWidth = 3;
                            ctx.setLineDash([5, 5]);
                            ctx.beginPath();
                            ctx.moveTo(280, 150);
                            ctx.lineTo(endX, endY);
                            ctx.stroke();
                            ctx.setLineDash([]);
                            
                            ctx.fillStyle = '#333';
                            ctx.font = 'bold 16px Arial';
                            ctx.fillText(`r = ${choice.r}m`, 230, 140);
                            ctx.fillText(`Î¸ = ${choice.angle}Â°`, 200, 250);
                        },
                        solution: `ì£¼ì–´ì§„ ê°’: r = ${choice.r}m, Î¸ = ${choice.angle}Â°\në³€ìœ„ì˜ í¬ê¸° = 2rÃ—sin(Î¸/2) = 2Ã—${choice.r}Ã—sin(${choice.angle/2}Â°) = ${choice.displacement}m`
                    };
                }
            },
            {
                type: 'ë“±ì†ì›ìš´ë™ - ì†ë„ ë°©í–¥',
                generator: () => {
                    const choices = [
                        {r: 5, v: 10, description: 'ì ‘ì„ ë°©í–¥'},
                        {r: 8, v: 12, description: 'ì ‘ì„ ë°©í–¥'},
                        {r: 10, v: 15, description: 'ì ‘ì„ ë°©í–¥'}
                    ];
                    const choice = choices[Math.floor(Math.random() * choices.length)];
                    
                    return {
                        text: `ë°˜ì§€ë¦„ ${choice.r}mì¸ ì›ê¶¤ë„ë¥¼ ë”°ë¼ ë¬¼ì²´ê°€ ì†ë ¥ ${choice.v}m/së¡œ ë“±ì†ì›ìš´ë™ì„ í•˜ê³  ìˆìŠµë‹ˆë‹¤. ë¬¼ì²´ì˜ ì†ë„ ë°©í–¥ì€ ì–´ëŠ ë°©í–¥ì…ë‹ˆê¹Œ? (ì›ì˜ ì¤‘ì‹¬ ë°©í–¥, ì ‘ì„  ë°©í–¥, ë°˜ì§€ë¦„ ë°©í–¥ ì¤‘ ì„ íƒ)`,
                        inputs: [
                            { label: 'ì†ë„ ë°©í–¥', answer: 'ì ‘ì„ ', unit: '', isText: true }
                        ],
                        diagram: (ctx) => {
                            ctx.clearRect(0, 0, 400, 300);
                            ctx.strokeStyle = '#667eea';
                            ctx.lineWidth = 3;
                            ctx.beginPath();
                            ctx.arc(200, 150, 80, 0, 2 * Math.PI);
                            ctx.stroke();
                            
                            ctx.fillStyle = '#764ba2';
                            ctx.beginPath();
                            ctx.arc(280, 150, 8, 0, 2 * Math.PI);
                            ctx.fill();
                            
                            // ì†ë„ ë²¡í„° (ì ‘ì„  ë°©í–¥)
                            ctx.strokeStyle = '#ff6b6b';
                            ctx.lineWidth = 3;
                            ctx.beginPath();
                            ctx.moveTo(280, 150);
                            ctx.lineTo(280, 100);
                            ctx.stroke();
                            
                            // í™”ì‚´í‘œ
                            ctx.beginPath();
                            ctx.moveTo(280, 100);
                            ctx.lineTo(275, 110);
                            ctx.moveTo(280, 100);
                            ctx.lineTo(285, 110);
                            ctx.stroke();
                            
                            ctx.fillStyle = '#ff6b6b';
                            ctx.font = 'bold 14px Arial';
                            ctx.fillText('v', 290, 95);
                            
                            ctx.fillStyle = '#333';
                            ctx.font = 'bold 16px Arial';
                            ctx.fillText(`v = ${choice.v}m/s`, 290, 160);
                            ctx.fillText(`r = ${choice.r}m`, 230, 140);
                        },
                        solution: `ë“±ì†ì›ìš´ë™ì—ì„œ ì†ë„ì˜ ë°©í–¥ì€ í•­ìƒ ì›ì˜ ì ‘ì„  ë°©í–¥ì…ë‹ˆë‹¤.`
                    };
                }
            },
            {
                type: 'ë“±ì†ì›ìš´ë™ - ê°€ì†ë„ ë°©í–¥',
                generator: () => {
                    const choices = [
                        {r: 4, v: 8, a: 16},
                        {r: 5, v: 10, a: 20},
                        {r: 8, v: 12, a: 18}
                    ];
                    const choice = choices[Math.floor(Math.random() * choices.length)];
                    
                    return {
                        text: `ë°˜ì§€ë¦„ ${choice.r}mì¸ ì›ê¶¤ë„ë¥¼ ë”°ë¼ ë¬¼ì²´ê°€ ì†ë ¥ ${choice.v}m/së¡œ ë“±ì†ì›ìš´ë™ì„ í•˜ê³  ìˆìŠµë‹ˆë‹¤. ê°€ì†ë„ì˜ ë°©í–¥ì€ ì–´ëŠ ë°©í–¥ì…ë‹ˆê¹Œ? (ì›ì˜ ì¤‘ì‹¬ ë°©í–¥, ì ‘ì„  ë°©í–¥ ì¤‘ ì„ íƒ)`,
                        inputs: [
                            { label: 'ê°€ì†ë„ ë°©í–¥', answer: 'ì¤‘ì‹¬', unit: '', isText: true }
                        ],
                        diagram: (ctx) => {
                            ctx.clearRect(0, 0, 400, 300);
                            ctx.strokeStyle = '#667eea';
                            ctx.lineWidth = 3;
                            ctx.beginPath();
                            ctx.arc(200, 150, 80, 0, 2 * Math.PI);
                            ctx.stroke();
                            
                            // ì¤‘ì‹¬
                            ctx.fillStyle = '#333';
                            ctx.beginPath();
                            ctx.arc(200, 150, 5, 0, 2 * Math.PI);
                            ctx.fill();
                            
                            ctx.fillStyle = '#764ba2';
                            ctx.beginPath();
                            ctx.arc(280, 150, 8, 0, 2 * Math.PI);
                            ctx.fill();
                            
                            // êµ¬ì‹¬ê°€ì†ë„ ë²¡í„°
                            ctx.strokeStyle = '#e74c3c';
                            ctx.lineWidth = 3;
                            ctx.beginPath();
                            ctx.moveTo(280, 150);
                            ctx.lineTo(220, 150);
                            ctx.stroke();
                            
                            // í™”ì‚´í‘œ
                            ctx.beginPath();
                            ctx.moveTo(220, 150);
                            ctx.lineTo(230, 145);
                            ctx.moveTo(220, 150);
                            ctx.lineTo(230, 155);
                            ctx.stroke();
                            
                            ctx.fillStyle = '#e74c3c';
                            ctx.font = 'bold 14px Arial';
                            ctx.fillText('a', 210, 140);
                            
                            ctx.fillStyle = '#333';
                            ctx.font = 'bold 16px Arial';
                            ctx.fillText(`a = ${choice.a}m/sÂ²`, 250, 180);
                            ctx.fillText(`r = ${choice.r}m`, 230, 130);
                        },
                        solution: `ë“±ì†ì›ìš´ë™ì—ì„œ ê°€ì†ë„ëŠ” í•­ìƒ ì›ì˜ ì¤‘ì‹¬ ë°©í–¥ì„ í–¥í•©ë‹ˆë‹¤. (êµ¬ì‹¬ê°€ì†ë„)`
                    };
                }
            },
            {
                type: 'ë“±ì†ì›ìš´ë™ - ì£¼ê¸°',
                generator: () => {
                    const choices = [
                        {r: 4, v: 4, T: 6.28},
                        {r: 6, v: 6, T: 6.28},
                        {r: 8, v: 4, T: 12.56},
                        {r: 10, v: 5, T: 12.56}
                    ];
                    const choice = choices[Math.floor(Math.random() * choices.length)];
                    
                    return {
                        text: `ë°˜ì§€ë¦„ ${choice.r}mì¸ ì›ê¶¤ë„ë¥¼ ë”°ë¼ ë¬¼ì²´ê°€ ì†ë ¥ ${choice.v}m/së¡œ ë“±ì†ì›ìš´ë™ì„ í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì£¼ê¸°ë¥¼ êµ¬í•˜ì‹œì˜¤. (ì›ì£¼ìœ¨ Ï€ = 3.14)`,
                        inputs: [
                            { label: 'ì£¼ê¸° T (ì´ˆ)', answer: choice.T, unit: 'ì´ˆ' }
                        ],
                        diagram: (ctx) => {
                            ctx.clearRect(0, 0, 400, 300);
                            ctx.strokeStyle = '#667eea';
                            ctx.lineWidth = 3;
                            ctx.beginPath();
                            ctx.arc(200, 150, 80, 0, 2 * Math.PI);
                            ctx.stroke();
                            
                            ctx.fillStyle = '#764ba2';
                            ctx.beginPath();
                            ctx.arc(280, 150, 8, 0, 2 * Math.PI);
                            ctx.fill();
                            
                            // í™”ì‚´í‘œë¡œ íšŒì „ í‘œì‹œ
                            ctx.strokeStyle = '#28a745';
                            ctx.lineWidth = 2;
                            ctx.beginPath();
                            ctx.arc(200, 150, 60, 0, Math.PI * 1.5);
                            ctx.stroke();
                            
                            ctx.beginPath();
                            ctx.moveTo(200, 90);
                            ctx.lineTo(195, 100);
                            ctx.moveTo(200, 90);
                            ctx.lineTo(205, 95);
                            ctx.stroke();
                            
                            ctx.fillStyle = '#333';
                            ctx.font = 'bold 16px Arial';
                            ctx.fillText(`r = ${choice.r}m`, 230, 140);
                            ctx.fillText(`v = ${choice.v}m/s`, 290, 160);
                            ctx.fillText('Ï€ = 3.14', 200, 250);
                        },
                        solution: `ì£¼ì–´ì§„ ê°’: r = ${choice.r}m, v = ${choice.v}m/s\nì£¼ê¸° T = 2Ï€r/v = 2Ã—3.14Ã—${choice.r}/${choice.v} = ${choice.T}ì´ˆ`
                    };
                }
            },
            {
                type: 'ë“±ì†ì›ìš´ë™ - ì†ë ¥',
                generator: () => {
                    const choices = [
                        {r: 4, T: 4, v: 6.28},
                        {r: 6, T: 4, v: 9.42},
                        {r: 8, T: 4, v: 12.56},
                        {r: 10, T: 5, v: 12.56}
                    ];
                    const choice = choices[Math.floor(Math.random() * choices.length)];
                    
                    return {
                        text: `ë°˜ì§€ë¦„ ${choice.r}mì¸ ì›ê¶¤ë„ë¥¼ ë”°ë¼ ë¬¼ì²´ê°€ ë“±ì†ì›ìš´ë™ì„ í•˜ê³  ìˆìŠµë‹ˆë‹¤. ë¬¼ì²´ì˜ ì£¼ê¸°ê°€ ${choice.T}ì´ˆì¼ ë•Œ, ì†ë ¥ì„ êµ¬í•˜ì‹œì˜¤. (ì›ì£¼ìœ¨ Ï€ = 3.14)`,
                        inputs: [
                            { label: 'ì†ë ¥ v (m/s)', answer: choice.v, unit: 'm/s' }
                        ],
                        diagram: (ctx) => {
                            ctx.clearRect(0, 0, 400, 300);
                            ctx.strokeStyle = '#667eea';
                            ctx.lineWidth = 3;
                            ctx.beginPath();
                            ctx.arc(200, 150, 80, 0, 2 * Math.PI);
                            ctx.stroke();
                            
                            ctx.fillStyle = '#764ba2';
                            ctx.beginPath();
                            ctx.arc(280, 150, 8, 0, 2 * Math.PI);
                            ctx.fill();
                            
                            ctx.strokeStyle = '#28a745';
                            ctx.lineWidth = 2;
                            ctx.beginPath();
                            ctx.moveTo(200, 150);
                            ctx.lineTo(280, 150);
                            ctx.stroke();
                            
                            ctx.fillStyle = '#333';
                            ctx.font = 'bold 16px Arial';
                            ctx.fillText(`r = ${choice.r}m`, 230, 140);
                            ctx.fillText(`T = ${choice.T}s`, 200, 250);
                            ctx.fillText('Ï€ = 3.14', 200, 270);
                            
                            ctx.strokeStyle = '#ff6b6b';
                            ctx.lineWidth = 2;
                            ctx.setLineDash([5, 5]);
                            ctx.beginPath();
                            ctx.moveTo(280, 150);
                            ctx.lineTo(320, 130);
                            ctx.stroke();
                            ctx.setLineDash([]);
                            
                            ctx.fillStyle = '#ff6b6b';
                            ctx.font = '14px Arial';
                            ctx.fillText('v', 325, 130);
                        },
                        solution: `ì£¼ì–´ì§„ ê°’: r = ${choice.r}m, T = ${choice.T}s, Ï€ = 3.14\nì†ë ¥ v = 2Ï€r/T = 2Ã—3.14Ã—${choice.r}/${choice.T} = ${choice.v} m/s`
                    };
                }
            },
            {
                type: 'ë“±ì†ì›ìš´ë™ - êµ¬ì‹¬ê°€ì†ë„',
                generator: () => {
                    const choices = [
                        {r: 2, v: 4, a: 8},
                        {r: 4, v: 4, a: 4},
                        {r: 5, v: 10, a: 20},
                        {r: 8, v: 4, a: 2},
                        {r: 10, v: 10, a: 10}
                    ];
                    const choice = choices[Math.floor(Math.random() * choices.length)];
                    
                    return {
                        text: `ë°˜ì§€ë¦„ ${choice.r}mì¸ ì›ê¶¤ë„ë¥¼ ë”°ë¼ ë¬¼ì²´ê°€ ì†ë ¥ ${choice.v}m/së¡œ ë“±ì†ì›ìš´ë™ì„ í•˜ê³  ìˆìŠµë‹ˆë‹¤. êµ¬ì‹¬ê°€ì†ë„ì˜ í¬ê¸°ë¥¼ êµ¬í•˜ì‹œì˜¤.`,
                        inputs: [
                            { label: 'êµ¬ì‹¬ê°€ì†ë„ a (m/sÂ²)', answer: choice.a, unit: 'm/sÂ²' }
                        ],
                        diagram: (ctx) => {
                            ctx.clearRect(0, 0, 400, 300);
                            ctx.strokeStyle = '#667eea';
                            ctx.lineWidth = 3;
                            ctx.beginPath();
                            ctx.arc(200, 150, 80, 0, 2 * Math.PI);
                            ctx.stroke();
                            
                            ctx.fillStyle = '#764ba2';
                            ctx.beginPath();
                            ctx.arc(280, 150, 8, 0, 2 * Math.PI);
                            ctx.fill();
                            
                            ctx.strokeStyle = '#28a745';
                            ctx.lineWidth = 2;
                            ctx.beginPath();
                            ctx.moveTo(200, 150);
                            ctx.lineTo(280, 150);
                            ctx.stroke();
                            
                            ctx.fillStyle = '#333';
                            ctx.font = 'bold 16px Arial';
                            ctx.fillText(`r = ${choice.r}m`, 230, 140);
                            ctx.fillText(`v = ${choice.v}m/s`, 290, 175);
                            
                            ctx.strokeStyle = '#e74c3c';
                            ctx.lineWidth = 3;
                            ctx.beginPath();
                            ctx.moveTo(280, 150);
                            ctx.lineTo(230, 150);
                            ctx.stroke();
                            
                            ctx.beginPath();
                            ctx.moveTo(230, 150);
                            ctx.lineTo(240, 145);
                            ctx.moveTo(230, 150);
                            ctx.lineTo(240, 155);
                            ctx.stroke();
                            
                            ctx.fillStyle = '#e74c3c';
                            ctx.font = 'bold 14px Arial';
                            ctx.fillText('a', 220, 145);
                        },
                        solution: `ì£¼ì–´ì§„ ê°’: r = ${choice.r}m, v = ${choice.v}m/s\nêµ¬ì‹¬ê°€ì†ë„ a = vÂ²/r = ${choice.v}Â²/${choice.r} = ${choice.a} m/sÂ²`
                    };
                }
            }
        ];

        function newProblem() {
            const problemType = problemTypes[Math.floor(Math.random() * problemTypes.length)];
            currentProblem = problemType.generator();
            
            document.getElementById('problemType').textContent = problemType.type;
            document.getElementById('problemText').textContent = currentProblem.text;
            
            const canvas = document.getElementById('diagram');
            const ctx = canvas.getContext('2d');
            currentProblem.diagram(ctx);
            
            const inputSection = document.getElementById('inputSection');
            inputSection.innerHTML = '';
            currentProblem.inputs.forEach((input, index) => {
                const div = document.createElement('div');
                div.className = 'input-group';
                const inputType = input.isText ? 'text' : 'number';
                const stepAttr = input.isText ? '' : 'step="0.01"';
                div.innerHTML = `
                    <label>${input.label}</label>
                    <input type="${inputType}" ${stepAttr} id="input${index}" placeholder="ë‹µì„ ì…ë ¥í•˜ì„¸ìš”">
                `;
                inputSection.appendChild(div);
            });
            
            document.getElementById('feedback').style.display = 'none';
        }

        function checkAnswer() {
            let allCorrect = true;
            const feedback = document.getElementById('feedback');
            let feedbackText = '';
            
            currentProblem.inputs.forEach((input, index) => {
                const userInput = document.getElementById(`input${index}`).value;
                
                if (input.isText) {
                    const normalizedUser = userInput.trim().toLowerCase();
                    const normalizedAnswer = input.answer.toLowerCase();
                    if (!normalizedUser.includes(normalizedAnswer)) {
                        allCorrect = false;
                    }
                } else {
                    const userAnswer = parseFloat(userInput);
                    const correctAnswer = input.answer;
                    const tolerance = Math.abs(correctAnswer * 0.02);
                    
                    if (Math.abs(userAnswer - correctAnswer) > tolerance) {
                        allCorrect = false;
                    }
                }
            });
            
            if (allCorrect) {
                feedback.className = 'feedback correct';
                feedbackText = 'ğŸ‰ ì •ë‹µì…ë‹ˆë‹¤!';
                let details = '<div class="feedback-details">';
                details += '<strong>ì •ë‹µ:</strong><br>';
                currentProblem.inputs.forEach(input => {
                    details += `${input.label}: ${input.answer} ${input.unit}<br>`;
                });
                details += '<br><strong>í’€ì´:</strong><br>' + currentProblem.solution.replace(/\n/g, '<br>');
                details += '</div>';
                feedback.innerHTML = feedbackText + details;
                feedback.style.display = 'block';
                
                setTimeout(() => {
                    newProblem();
                }, 3000);
            } else {
                feedback.className = 'feedback incorrect';
                feedbackText = 'âŒ í‹€ë ¸ìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ë³´ì„¸ìš”!';
                let details = '<div class="feedback-details">';
                details += '<strong>ì •ë‹µ:</strong><br>';
                currentProblem.inputs.forEach(input => {
                    details += `${input.label}: ${input.answer} ${input.unit}<br>`;
                });
                details += '<br><strong>í’€ì´:</strong><br>' + currentProblem.solution.replace(/\n/g, '<br>');
                details += '</div>';
                feedback.innerHTML = feedbackText + details;
                feedback.style.display = 'block';
            }
        }

        window.onload = () => {
            newProblem();
        };
    </script>
</body>
</html>