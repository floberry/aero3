<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Îì±ÏÜç ÏõêÏö¥Îèô ÏãúÎÆ¨Î†àÏù¥ÏÖò</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Malgun Gothic', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        h1 {
            color: #667eea;
            text-align: center;
            margin-bottom: 30px;
            font-size: 28px;
        }
        .problem-section {
            background: #f8f9ff;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 25px;
            border: 2px solid #667eea;
        }
        .canvas-container {
            display: flex;
            justify-content: center;
            margin: 20px 0;
        }
        canvas {
            border: 2px solid #667eea;
            border-radius: 10px;
            background: white;
        }
        .question {
            font-size: 18px;
            line-height: 1.8;
            margin: 20px 0;
            color: #333;
        }
        .options {
            margin: 20px 0;
        }
        .option {
            background: white;
            padding: 15px;
            margin: 10px 0;
            border-radius: 10px;
            border: 2px solid #ddd;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 16px;
        }
        .option:hover {
            border-color: #667eea;
            transform: translateX(5px);
        }
        .option.selected {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }
        .option.correct {
            background: #10b981;
            color: white;
            border-color: #10b981;
        }
        .option.incorrect {
            background: #ef4444;
            color: white;
            border-color: #ef4444;
        }
        .buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 25px;
        }
        button {
            padding: 15px 35px;
            font-size: 16px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
        }
        .submit-btn {
            background: #667eea;
            color: white;
        }
        .submit-btn:hover {
            background: #5568d3;
            transform: translateY(-2px);
        }
        .submit-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }
        .new-btn {
            background: #10b981;
            color: white;
        }
        .new-btn:hover {
            background: #059669;
            transform: translateY(-2px);
        }
        .result {
            margin-top: 20px;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            font-size: 18px;
            font-weight: bold;
        }
        .result.correct {
            background: #d1fae5;
            color: #065f46;
        }
        .result.incorrect {
            background: #fee2e2;
            color: #991b1b;
        }
        .explanation {
            background: #fef3c7;
            padding: 20px;
            border-radius: 10px;
            margin-top: 15px;
            border-left: 4px solid #f59e0b;
            text-align: left;
        }
        .stats {
            display: flex;
            justify-content: space-around;
            margin-top: 25px;
            padding: 20px;
            background: #f8f9ff;
            border-radius: 10px;
        }
        .stat-item {
            text-align: center;
        }
        .stat-label {
            color: #666;
            font-size: 14px;
            margin-bottom: 5px;
        }
        .stat-value {
            color: #667eea;
            font-size: 24px;
            font-weight: bold;
        }
        .info-box {
            background: #e0e7ff;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
            font-size: 14px;
            color: #4338ca;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîÑ Îì±ÏÜç ÏõêÏö¥Îèô ÏãúÎÆ¨Î†àÏù¥ÏÖò</h1>
        
        <div class="problem-section">
            <div class="info-box" id="infoBox"></div>
            
            <div class="canvas-container">
                <canvas id="canvas" width="500" height="400"></canvas>
            </div>
            
            <div class="question" id="question"></div>
            
            <div class="options" id="options"></div>
            
            <div class="buttons">
                <button class="submit-btn" id="submitBtn">Ï†ïÎãµ ÌôïÏù∏</button>
                <button class="new-btn" id="newBtn">ÏÉà Î¨∏Ï†ú</button>
            </div>
            
            <div id="result"></div>
        </div>
        
        <div class="stats">
            <div class="stat-item">
                <div class="stat-label">Ï¥ù Î¨∏Ï†ú Ïàò</div>
                <div class="stat-value" id="totalProblems">0</div>
            </div>
            <div class="stat-item">
                <div class="stat-label">Ï†ïÎãµ Ïàò</div>
                <div class="stat-value" id="correctAnswers">0</div>
            </div>
            <div class="stat-item">
                <div class="stat-label">Ï†ïÎãµÎ•†</div>
                <div class="stat-value" id="accuracy">0%</div>
            </div>
        </div>
    </div>

    <script>
        let currentProblem = {};
        let selectedOption = null;
        let stats = {total: 0, correct: 0};
        let animationId = null;
        let angle = 0;

        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');

        function generateProblem() {
            const types = ['velocity_direction', 'acceleration_direction', 'force_direction', 'velocity_comparison', 'centripetal_force'];
            const type = types[Math.floor(Math.random() * types.length)];
            
            // ÎûúÎç§ ÏõêÏö¥Îèô ÌååÎùºÎØ∏ÌÑ∞
            const radius = 80 + Math.floor(Math.random() * 40); // 80-120
            const speed = 1 + Math.random() * 2; // ÏÜçÎ†•
            const mass = Math.floor(Math.random() * 3) + 1; // ÏßàÎüâ (m, 2m, 3m)
            const numPoints = 4; // Í¥ÄÏ∞∞ ÏßÄÏ†ê Í∞úÏàò
            const pointIndex = Math.floor(Math.random() * numPoints); // 0-3 (p, q, r, s)
            const pointLabels = ['p', 'q', 'r', 's'];
            
            currentProblem = {
                type: type,
                radius: radius,
                speed: speed,
                mass: mass,
                pointIndex: pointIndex,
                pointLabel: pointLabels[pointIndex],
                numPoints: numPoints
            };
            
            angle = 0;
            selectedOption = null;
            document.getElementById('result').innerHTML = '';
            
            displayInfo();
            generateQuestion();
            startAnimation();
        }

        function displayInfo() {
            const {radius, mass, speed} = currentProblem;
            document.getElementById('infoBox').innerHTML = 
                `<strong>Ï°∞Í±¥:</strong> ÏßàÎüâ ${mass}mÏù∏ Î¨ºÏ≤¥Í∞Ä Î∞òÏßÄÎ¶Ñ ${Math.round(radius)}Ïù∏ Ïõê ÏúÑÏóêÏÑú ÏùºÏ†ïÌïú ÏÜçÎ†•ÏúºÎ°ú Îì±ÏÜç ÏõêÏö¥ÎèôÏùÑ ÌïòÍ≥† ÏûàÏäµÎãàÎã§.`;
        }

        function startAnimation() {
            if (animationId) cancelAnimationFrame(animationId);
            
            function animate() {
                drawProblem();
                angle += currentProblem.speed * 0.02;
                animationId = requestAnimationFrame(animate);
            }
            animate();
        }

        function drawProblem() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            const {radius, pointIndex, numPoints} = currentProblem;
            
            // Ïõê Í∑∏Î¶¨Í∏∞
            ctx.strokeStyle = '#999';
            ctx.lineWidth = 2;
            ctx.setLineDash([5, 5]);
            ctx.beginPath();
            ctx.arc(centerX, centerY, radius, 0, Math.PI * 2);
            ctx.stroke();
            ctx.setLineDash([]);
            
            // Ï§ëÏã¨Ï†ê
            ctx.fillStyle = '#666';
            ctx.beginPath();
            ctx.arc(centerX, centerY, 3, 0, Math.PI * 2);
            ctx.fill();
            
            // Í¥ÄÏ∞∞ ÏßÄÏ†ê ÌëúÏãú (p, q, r, s)
            const pointAngles = [0, Math.PI/2, Math.PI, 3*Math.PI/2];
            const pointLabels = ['p', 'q', 'r', 's'];
            
            pointAngles.forEach((pAngle, idx) => {
                const px = centerX + radius * Math.cos(pAngle);
                const py = centerY + radius * Math.sin(pAngle);
                
                ctx.fillStyle = idx === pointIndex ? '#ef4444' : '#999';
                ctx.beginPath();
                ctx.arc(px, py, 5, 0, Math.PI * 2);
                ctx.fill();
                
                ctx.fillStyle = idx === pointIndex ? '#ef4444' : '#666';
                ctx.font = 'bold 16px Arial';
                ctx.fillText(pointLabels[idx], px + 15, py + 5);
            });
            
            // Î¨ºÏ≤¥ Í∑∏Î¶¨Í∏∞
            const x = centerX + radius * Math.cos(angle);
            const y = centerY + radius * Math.sin(angle);
            
            ctx.fillStyle = '#3b82f6';
            ctx.beginPath();
            ctx.arc(x, y, 12, 0, Math.PI * 2);
            ctx.fill();
            
            ctx.strokeStyle = 'white';
            ctx.lineWidth = 2;
            ctx.stroke();
            
            // ÏÜçÎèÑ Î≤°ÌÑ∞ (Ï†ëÏÑ† Î∞©Ìñ•)
            const vx = -Math.sin(angle);
            const vy = Math.cos(angle);
            drawVector(x, y, x + vx * 40, y + vy * 40, '#10b981', 'v');
            
            // Í∞ÄÏÜçÎèÑ Î≤°ÌÑ∞ (Ï§ëÏã¨ Î∞©Ìñ•)
            const ax = -Math.cos(angle);
            const ay = -Math.sin(angle);
            drawVector(x, y, x + ax * 30, y + ay * 30, '#ef4444', 'a');
        }

        function drawVector(x1, y1, x2, y2, color, label) {
            ctx.strokeStyle = color;
            ctx.fillStyle = color;
            ctx.lineWidth = 3;
            
            // ÏÑ† Í∑∏Î¶¨Í∏∞
            ctx.beginPath();
            ctx.moveTo(x1, y1);
            ctx.lineTo(x2, y2);
            ctx.stroke();
            
            // ÌôîÏÇ¥Ìëú
            const angle = Math.atan2(y2 - y1, x2 - x1);
            const arrowLen = 10;
            
            ctx.beginPath();
            ctx.moveTo(x2, y2);
            ctx.lineTo(x2 - arrowLen * Math.cos(angle - Math.PI / 6), 
                       y2 - arrowLen * Math.sin(angle - Math.PI / 6));
            ctx.lineTo(x2 - arrowLen * Math.cos(angle + Math.PI / 6), 
                       y2 - arrowLen * Math.sin(angle + Math.PI / 6));
            ctx.closePath();
            ctx.fill();
            
            // ÎùºÎ≤®
            ctx.font = 'bold 14px Arial';
            ctx.fillText(label, x2 + 10, y2 - 10);
        }

        function generateQuestion() {
            const {type, pointLabel, mass, radius} = currentProblem;
            let question = '';
            let options = [];
            let correctAnswer = 0;
            let explanation = '';
            
            if (type === 'velocity_direction') {
                question = `Ï†ê ${pointLabel}ÏóêÏÑú Î¨ºÏ≤¥Ïùò ÏÜçÎèÑ Î∞©Ìñ•ÏúºÎ°ú Ïò≥ÏùÄ Í≤ÉÏùÄ?`;
                
                if (pointLabel === 'p') {
                    options = ['‚Üë (ÏúÑÏ™Ω)', '‚Üì (ÏïÑÎûòÏ™Ω)', '‚Üê (ÏôºÏ™Ω)', '‚Üí (Ïò§Î•∏Ï™Ω)', 'Ï§ëÏã¨ Î∞©Ìñ•'];
                    correctAnswer = 0;
                    explanation = 'Îì±ÏÜç ÏõêÏö¥ÎèôÏóêÏÑú ÏÜçÎèÑÎäî Ìï≠ÏÉÅ Ïö¥Îèô Î∞©Ìñ•Ïùò Ï†ëÏÑ† Î∞©Ìñ•ÏûÖÎãàÎã§. Ï†ê pÏóêÏÑúÎäî ÏúÑÏ™Ω(‚Üë) Î∞©Ìñ•ÏûÖÎãàÎã§.';
                } else if (pointLabel === 'q') {
                    options = ['‚Üë (ÏúÑÏ™Ω)', '‚Üì (ÏïÑÎûòÏ™Ω)', '‚Üê (ÏôºÏ™Ω)', '‚Üí (Ïò§Î•∏Ï™Ω)', 'Ï§ëÏã¨ Î∞©Ìñ•'];
                    correctAnswer = 2;
                    explanation = 'Îì±ÏÜç ÏõêÏö¥ÎèôÏóêÏÑú ÏÜçÎèÑÎäî Ìï≠ÏÉÅ Ïö¥Îèô Î∞©Ìñ•Ïùò Ï†ëÏÑ† Î∞©Ìñ•ÏûÖÎãàÎã§. Ï†ê qÏóêÏÑúÎäî ÏôºÏ™Ω(‚Üê) Î∞©Ìñ•ÏûÖÎãàÎã§.';
                } else if (pointLabel === 'r') {
                    options = ['‚Üë (ÏúÑÏ™Ω)', '‚Üì (ÏïÑÎûòÏ™Ω)', '‚Üê (ÏôºÏ™Ω)', '‚Üí (Ïò§Î•∏Ï™Ω)', 'Ï§ëÏã¨ Î∞©Ìñ•'];
                    correctAnswer = 1;
                    explanation = 'Îì±ÏÜç ÏõêÏö¥ÎèôÏóêÏÑú ÏÜçÎèÑÎäî Ìï≠ÏÉÅ Ïö¥Îèô Î∞©Ìñ•Ïùò Ï†ëÏÑ† Î∞©Ìñ•ÏûÖÎãàÎã§. Ï†ê rÏóêÏÑúÎäî ÏïÑÎûòÏ™Ω(‚Üì) Î∞©Ìñ•ÏûÖÎãàÎã§.';
                } else {
                    options = ['‚Üë (ÏúÑÏ™Ω)', '‚Üì (ÏïÑÎûòÏ™Ω)', '‚Üê (ÏôºÏ™Ω)', '‚Üí (Ïò§Î•∏Ï™Ω)', 'Ï§ëÏã¨ Î∞©Ìñ•'];
                    correctAnswer = 3;
                    explanation = 'Îì±ÏÜç ÏõêÏö¥ÎèôÏóêÏÑú ÏÜçÎèÑÎäî Ìï≠ÏÉÅ Ïö¥Îèô Î∞©Ìñ•Ïùò Ï†ëÏÑ† Î∞©Ìñ•ÏûÖÎãàÎã§. Ï†ê sÏóêÏÑúÎäî Ïò§Î•∏Ï™Ω(‚Üí) Î∞©Ìñ•ÏûÖÎãàÎã§.';
                }
            } else if (type === 'acceleration_direction') {
                question = `Ï†ê ${pointLabel}ÏóêÏÑú Î¨ºÏ≤¥Ïùò Í∞ÄÏÜçÎèÑ Î∞©Ìñ•ÏúºÎ°ú Ïò≥ÏùÄ Í≤ÉÏùÄ?`;
                options = [
                    'Ï†ëÏÑ† Î∞©Ìñ• (ÏÜçÎèÑÏôÄ Í∞ôÏùÄ Î∞©Ìñ•)',
                    'Ï†ëÏÑ† Î∞©Ìñ• (ÏÜçÎèÑÏôÄ Î∞òÎåÄ Î∞©Ìñ•)',
                    'ÏõêÏùò Ï§ëÏã¨ Î∞©Ìñ•',
                    'ÏõêÏùò Ï§ëÏã¨ÏóêÏÑú Î∞îÍπ•Ï™Ω',
                    'Í∞ÄÏÜçÎèÑÍ∞Ä 0Ïù¥Îã§'
                ];
                correctAnswer = 2;
                explanation = 'Îì±ÏÜç ÏõêÏö¥ÎèôÏóêÏÑú Í∞ÄÏÜçÎèÑ(Íµ¨Ïã¨ Í∞ÄÏÜçÎèÑ)Îäî Ìï≠ÏÉÅ ÏõêÏùò Ï§ëÏã¨ÏùÑ Ìñ•Ìï©ÎãàÎã§. ÏÜçÎèÑÏùò Î∞©Ìñ•ÏùÄ Î≥ÄÌïòÏßÄÎßå ÌÅ¨Í∏∞Îäî ÏùºÏ†ïÌïòÎØÄÎ°ú Íµ¨Ïã¨ Í∞ÄÏÜçÎèÑÍ∞Ä Î∞úÏÉùÌï©ÎãàÎã§.';
            } else if (type === 'force_direction') {
                question = `Ï†ê ${pointLabel}ÏóêÏÑú Î¨ºÏ≤¥Í∞Ä Î∞õÎäî ÏïåÏßúÌûòÏùò Î∞©Ìñ•ÏúºÎ°ú Ïò≥ÏùÄ Í≤ÉÏùÄ?`;
                options = [
                    'Ï†ëÏÑ† Î∞©Ìñ• (ÏÜçÎèÑÏôÄ Í∞ôÏùÄ Î∞©Ìñ•)',
                    'Ï†ëÏÑ† Î∞©Ìñ• (ÏÜçÎèÑÏôÄ Î∞òÎåÄ Î∞©Ìñ•)',
                    'ÏõêÏùò Ï§ëÏã¨ Î∞©Ìñ•',
                    'ÏõêÏùò Ï§ëÏã¨ÏóêÏÑú Î∞îÍπ•Ï™Ω',
                    'ÏïåÏßúÌûòÏù¥ 0Ïù¥Îã§'
                ];
                correctAnswer = 2;
                explanation = 'Îâ¥ÌÑ¥ Ï†ú2Î≤ïÏπô(F=ma)Ïóê ÏùòÌï¥ ÏïåÏßúÌûòÏùò Î∞©Ìñ•ÏùÄ Í∞ÄÏÜçÎèÑÏùò Î∞©Ìñ•Í≥º Í∞ôÏäµÎãàÎã§. Îî∞ÎùºÏÑú Íµ¨Ïã¨Î†•ÏùÄ Ìï≠ÏÉÅ ÏõêÏùò Ï§ëÏã¨ÏùÑ Ìñ•Ìï©ÎãàÎã§.';
            } else if (type === 'velocity_comparison') {
                question = `Î¨ºÏ≤¥Ïùò ÏÜçÎ†•Ïóê ÎåÄÌïú ÏÑ§Î™ÖÏúºÎ°ú Ïò≥ÏùÄ Í≤ÉÏùÄ?`;
                options = [
                    'Ï†ê pÏóêÏÑú Í∞ÄÏû• Îπ†Î•¥Îã§',
                    'Ï†ê qÏóêÏÑú Í∞ÄÏû• Îπ†Î•¥Îã§',
                    'Ï†ê rÏóêÏÑú Í∞ÄÏû• Îπ†Î•¥Îã§',
                    'Ï†ê sÏóêÏÑú Í∞ÄÏû• Îπ†Î•¥Îã§',
                    'Î™®Îì† Ï†êÏóêÏÑú ÏÜçÎ†•Ïù¥ Í∞ôÎã§'
                ];
                correctAnswer = 4;
                explanation = 'Îì±ÏÜç ÏõêÏö¥ÎèôÏóêÏÑú "Îì±ÏÜç"ÏùÄ ÏÜçÎ†•Ïù¥ ÏùºÏ†ïÌïòÎã§Îäî ÏùòÎØ∏ÏûÖÎãàÎã§. ÏÜçÎèÑÏùò Î∞©Ìñ•ÏùÄ Í≥ÑÏÜç Î≥ÄÌïòÏßÄÎßå ÏÜçÎ†•(ÏÜçÎèÑÏùò ÌÅ¨Í∏∞)ÏùÄ Ìï≠ÏÉÅ ÏùºÏ†ïÌï©ÎãàÎã§.';
            } else {
                question = `Ïù¥ Î¨ºÏ≤¥Ïóê ÏûëÏö©ÌïòÎäî Íµ¨Ïã¨Î†•Ïùò ÌÅ¨Í∏∞Îäî? (ÏÜçÎ†•ÏùÑ vÎùº Ìï† Îïå)`;
                options = [
                    `${mass}mv¬≤/${Math.round(radius)}`,
                    `${mass}m/${Math.round(radius)}`,
                    `${mass}mv/${Math.round(radius)}`,
                    `v¬≤/${Math.round(radius)}`,
                    `${mass}mv¬≤`
                ];
                correctAnswer = 0;
                explanation = `Íµ¨Ïã¨Î†• F = mv¬≤/r ÏûÖÎãàÎã§. ÏßàÎüâÏù¥ ${mass}m, Î∞òÏßÄÎ¶ÑÏù¥ ${Math.round(radius)}Ïù¥ÎØÄÎ°ú F = ${mass}mv¬≤/${Math.round(radius)} ÏûÖÎãàÎã§.`;
            }
            
            currentProblem.question = question;
            currentProblem.options = options;
            currentProblem.correctAnswer = correctAnswer;
            currentProblem.explanation = explanation;
            
            displayQuestion();
        }

        function displayQuestion() {
            document.getElementById('question').innerHTML = currentProblem.question;
            
            const optionsDiv = document.getElementById('options');
            optionsDiv.innerHTML = '';
            
            currentProblem.options.forEach((option, index) => {
                const div = document.createElement('div');
                div.className = 'option';
                div.textContent = `${index + 1}. ${option}`;
                div.onclick = () => selectOption(index, div);
                optionsDiv.appendChild(div);
            });
            
            document.getElementById('submitBtn').disabled = false;
        }

        function selectOption(index, element) {
            document.querySelectorAll('.option').forEach(opt => {
                opt.classList.remove('selected');
            });
            element.classList.add('selected');
            selectedOption = index;
        }

        document.getElementById('submitBtn').onclick = function() {
            if (selectedOption === null) {
                alert('ÎãµÏùÑ ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî!');
                return;
            }
            
            stats.total++;
            const isCorrect = selectedOption === currentProblem.correctAnswer;
            if (isCorrect) stats.correct++;
            
            const options = document.querySelectorAll('.option');
            options.forEach((opt, idx) => {
                if (idx === currentProblem.correctAnswer) {
                    opt.classList.add('correct');
                } else if (idx === selectedOption) {
                    opt.classList.add('incorrect');
                }
                opt.onclick = null;
            });
            
            const resultDiv = document.getElementById('result');
            if (isCorrect) {
                resultDiv.innerHTML = `
                    <div class="result correct">‚úì Ï†ïÎãµÏûÖÎãàÎã§!</div>
                    <div class="explanation">
                        <strong>Ìï¥ÏÑ§:</strong><br>
                        ${currentProblem.explanation}
                    </div>
                `;
            } else {
                resultDiv.innerHTML = `
                    <div class="result incorrect">‚úó ÌãÄÎ†∏ÏäµÎãàÎã§!</div>
                    <div class="explanation">
                        <strong>Ï†ïÎãµ:</strong> ${currentProblem.options[currentProblem.correctAnswer]}<br><br>
                        <strong>Ìï¥ÏÑ§:</strong><br>
                        ${currentProblem.explanation}
                    </div>
                `;
            }
            
            updateStats();
            this.disabled = true;
        };

        document.getElementById('newBtn').onclick = function() {
            generateProblem();
        };

        function updateStats() {
            document.getElementById('totalProblems').textContent = stats.total;
            document.getElementById('correctAnswers').textContent = stats.correct;
            document.getElementById('accuracy').textContent = 
                stats.total > 0 ? Math.round((stats.correct / stats.total) * 100) + '%' : '0%';
        }

        // Ï¥àÍ∏∞ Î¨∏Ï†ú ÏÉùÏÑ±
        generateProblem();
    </script>
</body>
</html>